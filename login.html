<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="light dark" />
    <title>Legal Assistant â€” Login</title>
    <style>
      :root {
        --bg-start: #667eea; --bg-end: #764ba2; --surface: #ffffff;
        --text: #111827; --muted: #6b7280; --border: #e5e7eb; --ring: #6366f1; --danger: #ef4444;
        --shadow: 0 10px 30px rgba(0,0,0,.15);
      }
      [data-theme="dark"] {
        --bg-start: #1f2937; --bg-end: #111827; --surface: #0b1220;
        --text: #e5e7eb; --muted: #9ca3af; --border: #1f2937; --ring: #818cf8; --danger: #f87171;
        --shadow: 0 10px 30px rgba(0,0,0,.5);
      }
      *{box-sizing:border-box}
      html,body{height:100%}
      body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);
        background:linear-gradient(135deg,var(--bg-start),var(--bg-end));display:grid;place-items:center;padding:24px}
      .card{width:min(420px,100%);background:var(--surface);border:1px solid var(--border);border-radius:18px;padding:28px;box-shadow:var(--shadow)}
      h1{margin:0 0 4px;font-size:clamp(1.4rem,1rem+2vw,1.8rem);text-align:center}
      p.sub{text-align:center;color:var(--muted);margin:0 0 16px}
      form{display:grid;gap:12px}
      label{font-weight:600}
      .row{display:flex;gap:8px;align-items:center;justify-content:space-between}
      input[type=password],input[type=text]{width:100%;padding:12px 14px;border-radius:12px;border:2px solid var(--border);background:transparent;color:inherit;font:inherit}
      input:focus{outline:none;border-color:var(--ring);box-shadow:0 0 0 4px color-mix(in oklab,var(--ring) 20%,transparent)}
      .btn{appearance:none;border:0;cursor:pointer;padding:14px 18px;border-radius:999px;font-weight:600;transition:transform .12s ease,opacity .2s ease;}
      .btn-primary{background:linear-gradient(45deg,#667eea,#764ba2);color:#fff;width:100%;box-shadow:0 8px 16px rgba(0,0,0,.18)}
      .btn-primary:hover{transform:translateY(-1px)}
      .muted{color:var(--muted);font-size:.9rem}
      .error{color:var(--danger)}
      .actions{display:flex;gap:8px;justify-content:space-between;align-items:center}
      .footer{text-align:center;color:var(--muted);margin-top:14px;font-size:.9rem}
      .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
      @media (prefers-reduced-motion:reduce){.btn{transition:none}}
    </style>
  </head>
  <body>
    <main class="card" aria-labelledby="title">
      <h1 id="title"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 3 2" role="img" aria-label="Turkey flag" style="width:1.1em;height:auto;vertical-align:-0.12em;margin-right:.4ch">
  <rect width="3" height="2" fill="#E30A17"/>
  <circle cx="1.2" cy="1" r="0.6" fill="#fff"/>
  <circle cx="1.35" cy="1" r="0.48" fill="#E30A17"/>
  <polygon fill="#fff" points="2.3,1 2.097,1.0705 2.0927,1.2853 1.9629,1.1141 1.7573,1.1763 1.88,1 1.7573,0.8237 1.9629,0.8859 2.0927,0.7147 2.0971,0.9295"/>
</svg> Legal Assistant</h1>
      <p class="sub">Demo login â€¢ Not for production security</p>

      <form id="loginForm" novalidate>
        <div>
          <label for="password">Password</label>
          <input id="password" name="password" type="password" placeholder="Enter password" autocomplete="current-password" required />
        </div>
        <div class="row">
          <label class="muted"><input type="checkbox" id="showPwd" /> Show password</label>
          <label class="muted"><input type="checkbox" id="remember" /> Remember me</label>
        </div>
        <div id="error" class="error" role="alert" aria-live="polite" style="min-height:1.2em"></div>
        <button class="btn btn-primary" id="submitBtn" type="submit">Sign in</button>
        <div class="actions">
          <button class="btn" type="button" id="themeBtn" aria-label="Toggle theme">ðŸŒ“ Theme</button>
          <span class="muted">Press <kbd>Enter</kbd> to submit</span>
        </div>
      </form>
      <p class="footer">Legal Assistant Demo â€¢ This page only gates the demo UI; it is not real authentication.</p>
    </main>

    <script>
      // ---- Demo-only gate (client-side). Do NOT use for real auth. ----
// sha256('TRlegal20801')
const EXPECTED_SHA256_HEX = 'e464c27aefe397d686ffc6588a9709bd79cb2535d52c1c4e989cf6a0b25b791e';

      const $ = (s)=>document.querySelector(s);
      const form = $('#loginForm');
      const pwd = $('#password');
      const showPwd = $('#showPwd');
      const remember = $('#remember');
      const err = $('#error');
      const themeBtn = $('#themeBtn');
      const submitBtn = $('#submitBtn');

      // If already authed, go to app
      if (sessionStorage.getItem('authenticated') === 'true' || localStorage.getItem('authenticated') === 'true') {
        location.replace('index.html');
      }

      // Theme toggle + persist
      themeBtn.addEventListener('click', () => {
        const html = document.documentElement;
        const next = html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        html.setAttribute('data-theme', next);
        try { localStorage.setItem('demo-theme', next); } catch {}
      });
      (function(){ try { const saved = localStorage.getItem('demo-theme'); if (saved) document.documentElement.setAttribute('data-theme', saved); } catch {} })();

      showPwd.addEventListener('change', () => { pwd.type = showPwd.checked ? 'text' : 'password'; });

      async function sha256Hex(message){
        const enc = new TextEncoder();
        const data = enc.encode(message);
        const digest = await crypto.subtle.digest('SHA-256', data);
        const bytes = new Uint8Array(digest);
        return Array.from(bytes).map(b=>b.toString(16).padStart(2,'0')).join('');
      }

      let attempts = 0; const MAX_ATTEMPTS = 5;

      form.addEventListener('submit', async (e) => {
        e.preventDefault(); err.textContent = '';
        if (!pwd.value) { err.textContent = 'Please enter your password.'; pwd.focus(); return; }
        if (attempts >= MAX_ATTEMPTS) { err.textContent = 'Too many attempts. Please refresh and try again later.'; return; }
        submitBtn.disabled = true;
        try {
          const hash = await sha256Hex(pwd.value.trim());
          if (hash === EXPECTED_SHA256_HEX) {
            const storage = remember.checked ? localStorage : sessionStorage;
            storage.setItem('authenticated', 'true');
            // Keep both for compatibility with older checks
            localStorage.setItem('authenticated', 'true');
            sessionStorage.setItem('authenticated', 'true');
            location.replace('index.html');
          } else {
            attempts++; err.textContent = 'Incorrect password.'; pwd.select();
          }
        } catch (e) {
          err.textContent = 'Something went wrong. Please try again.';
        } finally {
          submitBtn.disabled = false;
        }
      });
    </script>
  </body>
</html>
