<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    $1Legal document analysis assistant demo UI$2
    <meta name="color-scheme" content="light dark" />
    $1Legal Assistant$2
    <style>
      :root {
        --bg-start: #667eea;
        --bg-end: #764ba2;
        --bg-surface: #ffffff;
        --text: #111827;
        --muted: #6b7280;
        --ring: #6366f1;
        --success: #22c55e;
        --border: #e5e7eb;
        --shadow: 0 10px 30px rgba(0,0,0,.15);
      }
      [data-theme="dark"] {
        --bg-start: #1f2937;
        --bg-end: #111827;
        --bg-surface: #0b1220;
        --text: #e5e7eb;
        --muted: #9ca3af;
        --ring: #818cf8;
        --success: #34d399;
        --border: #1f2937;
        --shadow: 0 10px 30px rgba(0,0,0,.5);
      }

      * { box-sizing: border-box; }
      html, body { height: 100%; }
      body {
        margin: 0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        color: var(--text);
        background: linear-gradient(135deg, var(--bg-start), var(--bg-end));
        display: grid;
        place-items: center;
        padding: 24px;
      }

      .app {
        width: min(920px, 100%);
      }
      header {
        text-align: center;
        margin-bottom: 18px;
      }
      h1 {
        margin: 0 0 6px 0;
        font-size: clamp(1.8rem, 1rem + 3vw, 2.4rem);
      }
      .sub {
        color: var(--muted);
        font-size: .95rem;
      }

      .card {
        background: var(--bg-surface);
        border: 1px solid var(--border);
        border-radius: 18px;
        padding: 28px;
        box-shadow: var(--shadow);
      }

      form { display: grid; gap: 14px; }
      label { font-weight: 600; }

      textarea {
        width: 100%;
        min-height: 160px;
        padding: 16px;
        border-radius: 12px;
        border: 2px solid var(--border);
        font: inherit;
        resize: vertical;
        background: transparent;
        color: inherit;
      }
      textarea:focus {
        outline: none;
        border-color: var(--ring);
        box-shadow: 0 0 0 4px color-mix(in oklab, var(--ring) 20%, transparent);
      }

      .row { display: flex; gap: 8px; align-items: center; justify-content: space-between; }
      .muted { color: var(--muted); font-size: .9rem; }

      .btn {
        appearance: none; border: 0; cursor: pointer;
        padding: 14px 18px; border-radius: 999px; font-weight: 600;
        transition: transform .12s ease, box-shadow .12s ease, opacity .2s ease;
      }
      .btn:focus-visible { outline: 2px solid var(--ring); outline-offset: 2px; }
      .btn-primary {
        width: 100%; font-size: 1.05rem;
        background: linear-gradient(45deg, #667eea, #764ba2);
        color: white; box-shadow: 0 8px 16px rgba(0,0,0,.18);
      }
      .btn-primary:hover { transform: translateY(-1px); }
      .btn-primary[disabled] { opacity: .65; cursor: not-allowed; }

      .btn-ghost { background: transparent; color: var(--muted); }

      .toolbar { display: flex; gap: 8px; justify-content: flex-end; }

      .response {
        margin-top: 18px; padding: 18px; border: 1px solid var(--border);
        background: color-mix(in oklab, var(--bg-surface) 85%, #10b981 7%);
        border-left: 6px solid var(--success);
        border-radius: 12px;
      }

      .loading { display: inline-flex; align-items: center; gap: 10px; color: var(--muted); }
      .spinner {
        width: 18px; height: 18px; border-radius: 50%; border: 3px solid currentColor;
        border-right-color: transparent; animation: spin 700ms linear infinite;
      }
      @keyframes spin { to { transform: rotate(360deg) } }

      .footer { text-align: center; color: var(--muted); font-size: .9rem; margin-top: 18px; }

      .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }

      @media (prefers-reduced-motion: reduce) {
        .btn, .btn-primary:hover { transition: none; }
        .spinner { animation: none; }
      }
    </style>
  </head>
  <body>
    <div class="app">
      <header>
        <h1>‚öñÔ∏è Legal Document Analysis Assistant</h1>
        <p class="sub">Demo UI ‚Ä¢ Shortcut: <kbd>Ctrl<\/kbd>\/<kbd>‚åò<\/kbd> + <kbd>Enter<\/kbd> to submit</p>
      </header>

      <main class="card">
        <form id="form" novalidate>
          <div>
            $1Your question$2
            $1Type your legal question here...&#10;&#10;Examples:&#10‚Ä¢ What are the termination conditions in this contract?&#10‚Ä¢ What are my rights under labor law?&#10‚Ä¢ What are my obligations in this document?$2 maxlength="1000" required></textarea>
            <div class="row">
              <span id="counter" class="muted">0 / 1000</span>
              <div class="toolbar">
                <button type="button" class="btn btn-ghost" id="clearBtn" aria-label="Clear text">Clear</button>
                <button type="button" class="btn btn-ghost" id="themeBtn" aria-label="Toggle theme">üåì Theme</button>
              </div>
            </div>
          </div>

          <button id="analyzeBtn" class="btn btn-primary" type="submit">
            üöÄ Analyze
          </button>
        </form>

        <section id="response" class="response" role="region" aria-live="polite" aria-busy="false" hidden>
          <h2 class="sr-only">Analysis Result</h2>
          <div id="responseContent"></div>
          <div class="toolbar" style="margin-top:10px">
            $1Copy$2
          </div>
        </section>

        <p class="muted" style="margin-top:16px">
          <strong>Note:<\/strong> This system provides general information only and does not constitute legal advice.
        </p>
      </main>

      <footer class="footer">
        Legal Assistant Demo for Amazon Employees
      </footer>
    </div>

    <script>
      const $ = (sel) => document.querySelector(sel);
      const form = $('#form');
      const questionEl = $('#question');
      const counter = $('#counter');
      const analyzeBtn = $('#analyzeBtn');
      const response = $('#response');
      const responseContent = $('#responseContent');
      const copyBtn = $('#copyBtn');
      const clearBtn = $('#clearBtn');
      const themeBtn = $('#themeBtn');

      // Character counter
      questionEl.addEventListener('input', () => {
        counter.textContent = `${questionEl.value.length} / ${questionEl.maxLength}`;
      });

      // Submit: Ctrl/Cmd + Enter
      questionEl.addEventListener('keydown', (e) => {
        if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
          form.requestSubmit();
        }
      });

      // Clear
      clearBtn.addEventListener('click', () => {
        questionEl.value = '';
        counter.textContent = `0 / ${questionEl.maxLength}`;
        questionEl.focus();
        response.hidden = true;
      });

      // Theme toggle
      themeBtn.addEventListener('click', () => {
        const html = document.documentElement;
        const next = html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        html.setAttribute('data-theme', next);
        try { localStorage.setItem('demo-theme', next); } catch {}
      });
      // Persist theme
      (function(){
        try {
          const saved = localStorage.getItem('demo-theme');
          if (saved) document.documentElement.setAttribute('data-theme', saved);
        } catch {}
      })();

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        if (!questionEl.value.trim()) {
          questionEl.reportValidity();
          return;
        }

        // UI: start loading
        analyzeBtn.disabled = true;
        response.hidden = false;
        response.setAttribute('aria-busy', 'true');
        responseContent.innerHTML = '';
        const loading = document.createElement('div');
        loading.className = 'loading';
        loading.innerHTML = '<span class="spinner" aria-hidden="true"></span><span>ü§ñ The AI assistant is analyzing your question‚Ä¶</span>';
        responseContent.appendChild(loading);

        // Demo: simulate API call
        try {
          const userQuestion = questionEl.value; // keep raw

          await new Promise((res) => setTimeout(res, 1200));

          // Build safe result DOM (no innerHTML with user content)
          responseContent.innerHTML = '';

          const heading = document.createElement('strong');
          heading.textContent = 'üìã Question Summary:';
          const quote = document.createElement('blockquote');
          quote.style.margin = '8px 0 16px';
          quote.style.whiteSpace = 'pre-wrap';
          quote.textContent = userQuestion; // SAFE: textContent

          const assessH = document.createElement('strong');
          assessH.textContent = 'üîç Legal Assessment (Demo):';
          const assessP = document.createElement('p');
          assessP.textContent = 'This is a demo version. For real analysis, connect a backend service (e.g., AWS Bedrock / an agent).';

          const stepsH = document.createElement('strong');
          stepsH.textContent = 'üìö √ñnerilen Adƒ±mlar:';
          const steps = document.createElement('ol');
          ['Review the relevant legislation', 'Seek expert legal advice', 'Review the document(s) clause by clause'].forEach(t => {
            const li = document.createElement('li'); li.textContent = t; steps.appendChild(li);
          });

          const noteH = document.createElement('strong');
          noteH.textContent = '‚ö†Ô∏è Important Note:';
          const noteP = document.createElement('p');
          noteP.textContent = 'This system provides general information; it is not legal advice.';

          const frag = document.createDocumentFragment();
          frag.append(heading, document.createElement('br'), quote, assessH, document.createElement('br'), assessP, document.createElement('br'), stepsH, steps, document.createElement('br'), noteH, noteP);
          responseContent.appendChild(frag);
        } catch (err) {
          responseContent.innerHTML = '';
          const errP = document.createElement('p');
          errP.style.color = 'crimson';
          errP.textContent = 'Something went wrong. Please try again.';
          responseContent.appendChild(errP);
        } finally {
          analyzeBtn.disabled = false;
          response.setAttribute('aria-busy', 'false');
        }
      });

      // Copy to clipboard
      copyBtn.addEventListener('click', async () => {
        try {
          const text = responseContent.innerText.trim();
          if (!text) return;
          await navigator.clipboard.writeText(text);
          copyBtn.textContent = 'Copied ‚úì';
          setTimeout(() => (copyBtn.textContent = 'Copy'), 1200);
        } catch {}
      });

      // Example of how a real API call could look (replace in submit handler):
      async function analyzeViaAPI(question) {
        const res = await fetch('/api/analyze', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ question })
        });
        if (!res.ok) throw new Error('Network error');
        return res.json();
      }
    </script>
  </body>
</html>
